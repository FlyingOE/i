#include<stdio.h>
#include<stdlib.h>
#include<string.h>

//tccrepl:gist.github.com/gbluma/1158a1af7a70db3cfce7


int C[256]={0,0,0,0,0,0,0,0,0,0,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,6,2,2,2,2,3,0,1,2,2,2,8,4,12,5,5,5,5,5,5,5,5,5,5,9,0,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,11,1,2,2,7,4,4,4,4,10,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
int T[18][14]={{0,1,2,3,4,5,6,7,8,2,4,3,9,0},{0,1,2,3,4,5,6,7,2,2,4,3,3,0},{0,1,2,3,4,5,6,7,8,2,4,3,3,0},{0,1,2,3,4,5,6,7,8,11,4,3,3,0},{0,1,2,3,12,12,6,7,2,2,12,3,3,0},{0,1,2,3,13,13,6,7,2,11,14,3,3,0},{15,15,15,15,15,15,17,15,15,15,15,16,15,15},{0,1,2,3,12,5,6,7,2,2,12,3,3,0},{0,1,2,3,4,13,6,7,8,2,4,3,3,0},{10,10,10,10,10,10,10,10,10,10,10,10,10,0},{10,10,10,10,10,10,10,10,10,10,10,10,10,0},{0,1,2,3,4,5,6,7,8,2,4,3,3,0},{0,1,2,3,12,12,6,7,2,2,12,3,3,0},{0,1,2,3,13,13,6,7,2,2,14,3,3,0},{0,1,2,3,13,13,6,7,13,2,13,3,3,0},{15,15,15,15,15,15,17,15,15,15,15,16,15,15},{15,15,15,15,15,15,15,15,15,15,15,15,15,15},{0,1,2,3,4,5,6,7,2,2,4,3,3,0}};
char*src;
char*nxt(){static int t;static char *c;if(!c)c=src;while(*c)if(10>(t=T[t][C[(int)*c++]]))return c-1;return 0;}
int  tok(){static char*a,*b;a=a?b:nxt();while(a&&!C[a[0]])a=nxt();if(!a)return 0;b=nxt();src=a;return b?b-a:strlen(a);}

int vt;

char*dy(char*x,char*p,char*y){printf("dy %s\n",x);return x;}
char*mo(char*p,char*x){printf("mo %s\n",p);return p;}
char*t(){
 int i=tok();if(!i)return 0;
 int c=C[src[0]];
 vt=(c==3);
 return src;
}
char*e(char*x){
 if(!x)return 0;
 int vx=vt;
 char*y=t();int vy=vt;if(!y){vt=vx;return x;}
 if(vy&&!vx){
  char*r=e(t());int vr=vt;
  return dy(x,y,r);
 }
 vt=vy;
 char*r=e(y);
 int vr=vt;
 return mo(x,r);
}


void parse(char *s){
	src=s;
	int i;
	while(0!=(i=tok()))printf("%d %s %d\n",i,src,C[src[0]]);
	
// int n=strlen(s);
// int t=0;for(int i=0;i<n;i++)if(10>(t=T[t][C[s[i]]]))printf("%s\n",s+i);
}



int main(int args,char**argv){
 if(args>1){
  src=argv[1];
  e(t());
 }
}
