set -e
set -x

cc="gcc -O2 -s -Werror -Wfatal-errors"
MAT=
IMG=

$cc -c img/img.c #rm

# ktye/k
# wg: go install github.com/ktye/wg/cmd/wg
wg -c -prefix ktye_ -nomain .. > ktye.h
cat api                       >> ktye.h
$cc -c k.c 


# math/lapack
MAT="mat.o liblapacke.a liblapack.a librefblas.a -lgfortran -lquadmath -lm"
$cc -c mat/mat.c

# img/png,ttf
IMG="img.o"
$cc -c img/img.c

# link everything to k+
$cc -o k+ k.o $IMG $MAT

