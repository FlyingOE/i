<head><meta charset="utf-8"><title>j</title></head>
<link rel=icon href='data:;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAABSSURBVDhPY/wPBAwUACYozcDAyAjBhACaOoQBZAKCBjACbQNhXID2LgCFMb5wHgJeIARoYwAhfyMD2nqBGFdgNQA93slKB7AEhE8zCFCYnRkYAOS/HR/UGSYjAAAAAElFTkSuQmCC'>
<style>

 html{font-family:monospace;}
 body{overflow:hidden}
 textarea{background:black;color:#cccccc;resize:none;border:none}textarea:focus{color:white;}
 #term{position:absolute;width:40%;height:100%;left:0;top:0;background:#ffffea;color:black}
 #run{position:absolute;top:0;right:60%;font-family:monospace}
 #cnv{position:absolute;width:60%;height:70%;right:0;top:0}
 #deb{position:absolute;width:60%;height:30%;right:0;bottom:0}
 
</style>
<script>

var J,JJ,C,U,I,B
function ge(x){return document.getElementById(x)};
function us(s){return new TextEncoder("utf-8").encode(s)}
function input(t,a,b,s){a=t.selectionStart;b=t.selectionEnd;s=t.value;return (b-a)>0?s.substring(a,b):s}
function run(w,h){
 jtry(us(input(term)))
 // deb.value=term.value
 // w=cnv.clientWidth;h=cnv.clientHeight;cnv.width=w;cnv.height=h
 //ctx.fillStyle="green";ctx.fillRect(5,5,w-10,h-10);}
}
function jtry(u){C.set(B)
 try     {for(var i=0;i<u.length;i++)JJ(u[i]);JJ(33);JJ(10);}
 catch(e){console.log(e);deb.value="!"}}
function stk(x){deb.value=X(U[1])}
function X(x){return(x==0)?"!!":(!(x&7))?XL(x):(x&1)?(x>>1).toString():(x&2)?sy(x):(x&4)?String.fromCharChode(33+(x>>>3)):"!!!"}
function XL(x,n){n=nn(x);x=2+(x>>>2);var r=new Array(2);for(var i=0;i<n;i++)r[i]=X(U[x+i]);return "["+r.join()+"]"}
function nn(x){return U[1+(x>>>2)]}
function draw(x,y){console.log("draw",x,y)}



</script>


<body>
<textarea id="term" class="term" wrap="off" spellcheck="false"></textarea>
<button   id="run" onclick="run()">run</button>
<canvas   id="cnv"></canvas>
<textarea id="deb" class="term" wrap="off" spellcheck="false" readonly></textarea>
<script>term=ge("term");cnv=ge("cnv");deb=ge("deb");ctx=cnv.getContext('2d')

function msl(){var b=J.exports.mem.buffer;C=new Uint8Array(b);U=new Uint32Array(b);I=new Int32Array(b);JJ=J.exports.j;JJ(16);B=C.slice(0);}
fetch('j.wasm').then(r=>r.arrayBuffer()).then(r=>WebAssembly.instantiate(r,{"ext":{"stk":stk,"draw":draw} })).then(r=>{J=r.instance;msl();})

term.value=window.location.hash.slice(1)
deb.value=""
</script>
</body></html>


<!--
  var K
  var draw  = function(w,h,p){}
  var grow  = function(x)    {var cur=K.exports.mem.buffer.byteLength;if((1<<x)>cur){var a=(1<<x)-cur;K.exports.mem.grow(a>>>16); msl()};return x}
  var printc= function(x,y)  {L(su(K.C.slice(x,x+y)))}
  var msl   = function()     {var b=K.exports.mem.buffer;K.C=new Uint8Array(b);K.U=new Uint32Array(b);K.I=new Int32Array(b);K.F=new Float64Array(b)}
  var atx, mk, mki, mkc, cat, sc, val, rx, dx, bak
  
  function ktry(s){
   try     {var x=sk(kst(val(cu(us(s))))); bak=K.C.slice(0, 1<<K.U[32]);return x}
   catch(e){K.C.set(bak);return "!\n"}}
  
  function pd(e){if(e){e.preventDefault();e.stopPropagation()}}
  function L(x){console.log(x);return x}
  
  </script>
  </body>
  </html>


-->
