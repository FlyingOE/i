ngn=/c/k/ngn/k
cat << EOF > k.c
#include<stdio.h>
#include<stdlib.h>
#include<math.h>
#include<sys/time.h>
#define gtod gettimeofday
#ifdef __TINYC__
#define  read(a,b,c)  fread((b),(c),1,(FILE*)(a))
#define write(a,b,c) fwrite((b),(c),1,(FILE*)(a))
#define close fclose
#define __builtin_sqrt sqrt
#define __builtin_unreachable abort
#define PROT_READ 1
#define PROT_WRITE 1
#define MAP_PRIVATE 1
#define MAP_ANON 1
int32_t clz(int32_t x){int32_t r;__asm__("bsr %1, %0" : "=r" (r) : "rm" (x) : "cc");return r^31;}
#define __builtin_clzll(x) clz((int32_t)(x))
#define mmap_(a,b,c,d,e,f) malloc(b)
#define munmap(a,b) abort()
#else
#include<unistd.h>
#include<sys/mman.h>
#define mmap_ mmap
#endif

EOF
for file in g.h k.h a.c b.c c.c e.c f.c h.c i.c j.c k.c m.c o.c p.c s.c v.c w.c x.c; do 
        echo "//$file"
        cat $ngn/$file
done | grep -v "#include" >> k.c

echo "edit k.c (3 places: syscalls, frk, io)"
